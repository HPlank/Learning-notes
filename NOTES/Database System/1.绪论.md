## 1.绪论

### 1.1数据库的四个基本概念

###### 数据

数据是数据库中存储的基本对象，数据包括广义的数据，例如文本，图像，图形，音频，学生档案等。

数据的含义称为数据的语义，数据及其语义不可再分。

###### 数据库

数据库是长期存储在计算机内有组织的，可共享的大量数据集合。

数据库中的数据按照一定的数据模型组织，描述和存储，具有较小的冗余度，较高的数据独立性和易扩展性并可为各种用户共享。

###### 数据库数据的特点： 

​							永久存储，有组织，可共享

###### 数据库管理系统

1.数据定义功能，数据库管理系统提供数据定义语言（Data Definition Language,DDL）

2.数据组织，存储和管理。目标是提高存储空间的利用率和方便存取，提供多种存取方法来提高存取效率（索引查找，hash查找，顺序查找）

3.数据操纵功能（Data Manipulation Language，DML），实现对数据库的基本操作，如查询，插入，删除，修改等

4.数据库的事务管理和运行管理，保证事务安全正确运行，保证数据的安全性，完整性，多用户对数据的并发使用以及发生故障后的系统恢复

5.数据库的建立维护

6.其他。包括数据库管理系统与网络中其他软件的通信功能，数据转换功能，异构数据库之间的互访和互操作功能。

###### 数据库系统

数据库系统有数据库，数据库管理系统，应用程序和数据库管理员（DataBase Admirestrator,DBA）组成的存储，管理，处理和维护数据的系统。

###### 数据库系统的特点

1.数据结构化，是数据库的主要特征，夜市数据库系统与文件系统的主要区别。所谓整体结构化是指数据库中的数据不在仅仅针对某一个用户，而是面向整个组织或企业；不仅数据内部是结构化的，而且整体是结构化的，数据之间是有联系的。

2.数据的共享性高，冗余度低且易扩充，数据是要面向整个系统的，所以数据可以共享；数据共享大大减少数据冗余，节约存储空间。数据共享还能避免数据之间的不相容性和不一致性；由于数据面向整个系统，且是有结构的数据，不仅可以被多个应用共享，而且容易增加新的应用，是的数据库系统弹性大，易于扩充。

3.数据独立性高。包括物理独立性和逻辑独立性。物理独立性是指用户的应用程序与数据库中的数据的物理存储是相互独立的。程序只需要处理数据的逻辑结构；逻辑独立性是指用户的应用是程序与数据库的逻辑结构是相互独立的。

4.数据由数据库管理系统统一管理和控制。数据库管理系统为数据提供四点数据可控制功能：

​		一，数据的安全性保护，数据的安全性保护是指保护数据以防止不合法使用造成数据泄密和破坏。用户只能按规定对某些数据以某些方式进行使用处理。

​		二，数据的完整性检查，数据的完整性指数据的正确性，有效性和相容性。可以将数据控制在有效的范围内，保证数据之间满足一定的关系。

​		三，并发控制，当多个用户的进程同时存取，修改数据库时，可能会发生相互干扰而得到错误的结果或是的数据库的完整性遭到破坏，所以要控制并发操作。

​		四，数据库恢复，计算机的硬件故障，软件故障，操作员失误等，数据库管理系统必须具有将数据库从错误状态恢复到某一已知的正确状态的功能。

数据库管理系统在数据库建立运用和维护时对数据库进行统一控制，以保证数据的完整性和安全性，并在多用户同时使用数据库时进行并发控制，并在事故发生后对数据进行恢复。

### 1.2数据模型

数据模型是对现实世界数据特征的抽象。他是用来描述数据，组织数据和对数据进行操作的。

数据模型时数据库系统的核心和基础。

#### 1.2.1两类数据模型

概念模型，也称信息模型，它是按照用户的观点来对数据和信息建模，主要用于数据库设计

逻辑模型，主要包括层次模型，网状模型，关系模型，面向对象模型，和对象关系数据模型，半结构化数据模型 等。他是按照计算机系统的观点对数据建模，主要用于数据库管理系统的实现。

物理模型是对数据最底层的抽象现实世界经过如人的抽象认识，转化为概念模型再把概念模型转皇位计算机上某一数据库管理系统支持的数据模型

#### 1.2.2概念模型

实体（entity）：客观存在并可以相互区别的事物成为实体

属性（attribute）：尸体具有的某一特征称为属性

码（key）：唯一标识实体的属性集

实体型（entity type）：用实体名机器属性名集合来抽象和刻画同类实体

实体集（entity set）：同一类型实体的集合

联系（relationship）：不同实体集之间的联系，有一对一，一对多，多对多

#### 1.2.3数据模型的组成要素

数据结构是所描述的对象的集合，是对系统静态特征的描述

数据操作是指对数数据库中各种对象的实例允许指向的操作的集合，包括操作及有关的操作规则。

完整性约束条件

#### 1.2.4常用数据模型

层次模型

网状模型

关系模型

面向对象数据模型

对象关系数据模型

半结构化数据模型

#### 1.2.5层次模型

##### 层次模型的数据结构

用树形结构来表示各类实体以及实体间的联系（一对多）

example：

系：编号，系名，办公地点

教研室：教研室编号，教研室名		学生：学号，姓名，成绩

教员：职工号，姓名，研究方向

##### 层次模型的数据操纵和完整性约束

操作：查询，插入，删除，更新

约束条件：

插入时，如果没有对应的双亲节点值就不能插入他的子女节点值。

删除时，如果删除双亲节点值，则相应的子女节点值也将被同时删除。

##### 层次模型的优缺点

###### 优点：

1.数据结构简单清晰

2.查询效率高。层次模型记录间的联系用有向边表示，在DBMS中常用指针实现。当要存取某个结点的记录值，DBMS就沿着这一条路劲很快找到改记录值，所以层次数据库性能优于关系数据库，不低于网状数据库。

3.层次数据模型提供了良好的完整性支持

###### 缺点

现实中的联系大多是非层次的，如节点之间多对多的联系，不适合层次

若一个节点有多个双亲则用层次结构会冗余

查询子女节点必须通过双亲

#### 1.2.6网状模型

###### 网状模型的数据结构

允许一个以上的节点无双亲，一个节点可以有多个双亲

层次模型中子女节点与双亲的联系时唯一的，网状模型中不唯一

###### 完整性约束

支持记录码概念

保证一个联系中双亲记录和子女记录之间是一对多联系

###### 优缺点

优点：

更为直观描述现实世界

具有良好的性能，存取效率高

缺点：

结构复杂，DDL，DML复杂

记录之间的联系是通过存取路径实现的，在访问数据时要了解系统结构细节

#### 1.2.7关系模型

###### 关系模型的数据结构

关系模型要求关系必须是规范化的，关系的每个分量必须是一个不可分割数据项，不允许表中还有表

###### 完整性约束

DML必须满足关系的完整性约束：实体完整性，参照完整性，用户定义完整性。操作对象和操作结果都是关系

###### 优缺点

优点：建立在严格数学概念基础上；概念的单一，无论实体还是实体间联系都用关系来表示，数据结构简单，清晰，用户易懂。存取路径对用户透明，有更高的数据独立性，安全保密性

缺点：查询效率不如格式化数据结构（层/网）

## 1.3数据库系统的结构

### 1.3.1数据库系统模式概念

模式时数据库中全体数据的逻辑结构和特征的描述；模式的一个具体值称为模式的一个实例。同一模式可以有很多实例。

模式相对稳定，实例相对变动

模式反映数据的结构及其联系，实例反映数据库某一时刻的状态

### 1.3.2数据库系统三级结构模式

###### 模式（schema）

模式也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图。

###### 外模式：

子模式或用户模式，是数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图，始于某一应用有关的数据的逻辑表示。

是模式的子集。一个数据库可以有多个外模式。在不同的用户在在应用需求，看待数据的方式，对数据保密的要求等方面存在差异，其外模式也是不同的。

同一外模式可以为某一用户的多个应用系统所使用，但一个应用程序只能使用一个外模式。

外模式是保证数据库安全的一个有力措施，用户只能看见和访问所对应的外模式中的数据，其余数据看不见。

###### 内模式：

存储模式，一个数据库只有一个内模式。是数据物理结构和存储方式的描述，是数据在数据内部的组织方式。

### 1.3.3数据库的二级映像功能和数据独立性

#### 外模式/模式映像

外模式描述数据的局部逻辑结构。

同一个模式可以有多个外模式。

当模式改变时，由数据库管理员对各个外模式/模式映像做出相应的改变，可以使外模式保持不变。应用程序时依据外模式编写的，保证了数据与程序的逻辑独立性。

#### 模式/内模式映像

数据库中只有一个模式也就只有一个内模式，所以模式/捏模式映像时唯一的，定义了数据全局逻辑结构与存储结构之间的对应关系。

当数据库的存储结构改变时，由数据库管理员对模式/内模式映像做了相应改变，可以使模式保持不变，以保证数据程序的物理独立性。

三级模式中，数据库模式即全局逻辑结构时数据库的中心与关键，独立于数据库的其他层次。

内模式依赖于